# include <stdio.h>

int pre[100000];
int n, m, i;
int z, x, y;

int find_pre(int x)
{
	if (pre[x] == x)
		return pre[x];
	return pre[x]=find_pre(pre[x]); 
}
void join(int x,int y)                    //试图合并元素x和元素y
{
    int fx=find_pre(x), fy=find_pre(y); 		  //找到x和y的源头
    
	if(fx != fy) 
		pre[fx]=fy;  			  //合并两个源头
}

int main(void)
{	
	scanf("%d %d\n", &n, &m);
	for (int i=0; i<100000; ++i)
		pre[i] = i; 
	
	for (int i=0; i<m; ++i)
	{
		scanf("%d %d %d", &z,&x, &y);
		if (z == 1)
			join(x, y);
		else
		{
			if (find_pre(x) == find_pre(y))
				printf("Y\n");
			else
				printf("N\n");
		}
	}
	
	return 0;
}